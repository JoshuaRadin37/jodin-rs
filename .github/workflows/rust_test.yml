name: Rust Test

on:
  push:
    branches: [ main, develop ]

env:
  CARGO_TERM_COLOR: always

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Verify Changed files
        uses: tj-actions/verify-changed-files@v7.2
        id: verify-changed-files
        with:
          files: |
            .rs$
            .lalrpop$
      - name: Test
        if: steps.verify-changed-files.outputs.files_changed == 'true'
        run: cargo test --workspace --verbose
